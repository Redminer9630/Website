<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Quizshow – Gesamtschule Bremen West 8. Jahrgang</title>
<style>
:root{
    --bg:#f4f8ff; --card:#fff; --text:#071226;
    --user:#3b82f6; --bot:#3b82f6; --correct:#10b981; --wrong:#ef4444;
    --shadow:0 8px 24px rgba(17,24,39,0.08); --radius:12px; --pad:16px;
}
body{margin:0;font-family:Inter,system-ui,sans-serif;background:var(--bg);color:var(--text)}
.wrap{max-width:1100px;margin:20px auto;padding:12px;display:grid;gap:12px}
.topbar{display:flex;justify-content:space-between;align-items:center;background:var(--card);padding:12px;border-radius:var(--radius);box-shadow:var(--shadow)}
.title{font-weight:900;font-size:1.2rem}
.main{display:grid;gap:12px}
.card{background:var(--card);padding:var(--pad);border-radius:var(--radius);box-shadow:var(--shadow)}
#question{font-weight:900;font-size:1.3rem;margin-bottom:8px}
#choices{display:grid;gap:10px}
.choice{padding:12px;border-radius:var(--radius);border:1px solid rgba(0,0,0,0.1);cursor:pointer;font-weight:700;transition:all 0.12s;}
.choice:hover{box-shadow:0 6px 18px rgba(0,0,0,0.08);}
.user{background:var(--user,rgba(59,130,246,0.2))}
.bot{background:var(--bot,rgba(59,130,246,0.2))}
.correct{background:var(--correct,rgba(16,185,129,0.2))}
.wrong{background:var(--wrong,rgba(239,68,68,0.2))}
.action-row{display:flex;gap:8px;margin-top:10px}
button{padding:10px 14px;border-radius:var(--radius);border:none;cursor:pointer;font-weight:800}
.btn-primary{background:#3b82f6;color:#fff;}
.btn-ghost{background:transparent;border:1px solid rgba(0,0,0,0.1);}
.modal-overlay{position:fixed;inset:0;display:grid;place-items:center;pointer-events:none;}
.modal{background:white;padding:16px 24px;border-radius:var(--radius);font-weight:900;opacity:0;transform:scale(0.9);transition:all 0.3s;pointer-events:auto;}
.modal.show{opacity:1;transform:scale(1);}
.modal.correct{background:var(--correct);color:white;}
.modal.wrong{background:var(--wrong);color:white;}
.modal.bot{background:var(--bot);color:white;}
.control{display:flex;flex-direction:column;gap:6px}
</style>
</head>
<body>
<div class="wrap">
    <div class="topbar">
        <div class="title">Quizshow – Gesamtschule Bremen West 8. Jahrgang</div>
        <div class="control">
            <label>Themen auswählen (Mehrfachauswahl mit Strg/Ctrl):</label>
            <select id="topicSelect" multiple style="min-width:180px;height:80px;">
                <option value="Mathe" selected>Mathe</option>
                <option value="Deutsch" selected>Deutsch</option>
                <option value="Englisch" selected>Englisch</option>
                <option value="Sachkunde" selected>Sachkunde</option>
            </select>
        </div>
        <button id="startBtn" class="btn-primary">Start KI-Match ▶</button>
    </div>
    <div class="main">
        <section id="quizScreen" class="card hidden">
            <div id="question"></div>
            <div id="choices"></div>
            <div class="action-row">
                <button id="skipBtn" class="btn-ghost">Überspringen</button>
                <button id="nextBtn" class="btn-primary" disabled>Nächste ▶</button>
            </div>
        </section>
        <section id="endScreen" class="card hidden">
            <div id="resultText"></div>
            <button id="againBtn" class="btn-primary">Nochmal</button>
        </section>
    </div>
</div>

<div class="modal-overlay" id="modalOverlay">
    <div id="modalBox" class="modal"></div>
</div>

<script src="questions.js"></script>
<script>
let session=[], current=0;
const quizScreen=document.getElementById("quizScreen"), endScreen=document.getElementById("endScreen");
const questionEl=document.getElementById("question"), choicesEl=document.getElementById("choices");
const startBtn=document.getElementById("startBtn"), skipBtn=document.getElementById("skipBtn"), nextBtn=document.getElementById("nextBtn");
const againBtn=document.getElementById("againBtn"), resultText=document.getElementById("resultText");
const modalOverlay=document.getElementById("modalOverlay"), modalBox=document.getElementById("modalBox");

function shuffle(arr){return arr.sort(()=>Math.random()-0.5);}
function showModal(kind){
    modalBox.className="modal show "+kind;
    modalOverlay.style.display="grid";
    setTimeout(()=>{modalBox.className="modal"; modalOverlay.style.display="none"},1000);
}

startBtn.onclick=startGame;
againBtn.onclick=startGame;
skipBtn.onclick=()=>nextQuestion(true);
nextBtn.onclick=()=>nextQuestion(false);

function startGame(){
    const selectedTopics = Array.from(document.getElementById("topicSelect").selectedOptions).map(o=>o.value);
    const filteredPool = QUESTIONS.filter(q => selectedTopics.includes(q.topic));
    session = shuffle(filteredPool).slice(0,10);
    current=0;
    quizScreen.classList.remove("hidden");
    endScreen.classList.add("hidden");
    renderQuestion();
}

function renderQuestion(){
    nextBtn.disabled=true;
    const q=session[current];
    questionEl.textContent=`Frage ${current+1}: ${q.q}`;
    choicesEl.innerHTML="";
    const indexes=shuffle([0,1,2,3]);
    indexes.forEach(i=>{
        const btn=document.createElement("div");
        btn.className="choice";
        btn.textContent=q.a[i];
        btn.onclick=()=>selectAnswer(i,btn);
        choicesEl.appendChild(btn);
    });
}

function selectAnswer(i,btn){
    const q=session[current];
    Array.from(choicesEl.children).forEach(c=>c.classList.remove("user","bot","correct","wrong"));
    btn.classList.add("user");
    if(i===q.correct){
        btn.classList.add("correct");
        showModal("correct");
    }else{
        btn.classList.add("wrong");
        showModal("wrong");
    }
    nextBtn.disabled=false;
}

function nextQuestion(skipped){
    current++;
    if(current>=session.length){
        quizScreen.classList.add("hidden");
        endScreen.classList.remove("hidden");
        resultText.textContent="Du hast das Quiz beendet!";
    }else{
        renderQuestion();
    }
}
</script>
</body>
</html>
