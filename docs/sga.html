<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>SGA Ãœbersetzer</title>
  <style>
    body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; margin: 2em; }
    .block { width: 90%; display: flex; flex-direction: column; align-items: stretch; margin: 1em 0; }
    .row { display: flex; align-items: center; gap: 0.5em; }
    textarea { flex: 1; height: 150px; font-size: 1.2em; }
    label { font-weight: bold; margin-bottom: 0.3em; }
    button { padding: 0.4em 0.8em; font-size: 1.1em; cursor: pointer; }
    #swapBtn { margin: 1em 0; }
  </style>
</head>
<body>
  <h1>Standard Galactic Alphabet Ãœbersetzer</h1>

  <div class="block">
    <label for="inputText" id="inputLabel">Klartext</label>
    <div class="row">
      <textarea id="inputText" placeholder="Input"></textarea>
      <button id="pasteBtn" title="Aus Zwischenablage einfÃ¼gen">ðŸ“‹</button>
    </div>
  </div>

  <button id="swapBtn" title="Sprache wechseln">â‡„</button>

  <div class="block">
    <label for="outputText" id="outputLabel">SGA</label>
    <div class="row">
      <textarea id="outputText" placeholder="Output" readonly></textarea>
      <button id="copyBtn" title="In Zwischenablage kopieren">ðŸ“¤</button>
    </div>
  </div>

<script>
const input = document.getElementById("inputText")
const output = document.getElementById("outputText")
const swapBtn = document.getElementById("swapBtn")
const pasteBtn = document.getElementById("pasteBtn")
const copyBtn = document.getElementById("copyBtn")
const inputLabel = document.getElementById("inputLabel")
const outputLabel = document.getElementById("outputLabel")

const sgaMap = {
  A:"á”‘",B:"Ê–",C:"á“µ",D:"â†¸",E:"á’·",F:"âŽ“",G:"âŠ£",H:"â‘",I:"â•Ž",J:"â‹®",
  K:"ê–Œ",L:"ê–Ž",M:"á’²",N:"ãƒª",O:"ð™¹",P:"!Â¡",Q:"á‘‘",R:"âˆ·",S:"á“­",
  T:"â„¸",U:"âš",V:"âŠ",W:"âˆ´",X:"Ì‡/",Y:"||",Z:"â¨…"
}

const reverseMap = {}; for (let k in sgaMap) reverseMap[sgaMap[k]] = k
let direction = "toSGA"

function translate(t) {
  if (direction === "toSGA") return t.toUpperCase().split('').map(c => sgaMap[c] || c).join('')
  return t.split(/(?=.)/u).map(c => reverseMap[c] || c).join('')
}

function update() {
  output.value = translate(input.value)
  localStorage.setItem("inputText", input.value)
  localStorage.setItem("outputText", output.value)
}

input.addEventListener("input", update)

swapBtn.addEventListener("click", () => {
  direction = direction === "toSGA" ? "toText" : "toSGA"
  const temp = input.value
  input.value = output.value
  output.value = temp
  inputLabel.textContent = direction === "toSGA" ? "Klartext" : "SGA"
  outputLabel.textContent = direction === "toSGA" ? "SGA" : "Klartext"
  update()
})

pasteBtn.addEventListener("click", async () => {
  try { input.value = await navigator.clipboard.readText(); update() }
  catch (e) { alert("Zugriff auf Zwischenablage verweigert.\nNutze HTTPS oder einen lokalen Server.") }
})

copyBtn.addEventListener("click", async () => {
  try { await navigator.clipboard.writeText(output.value) }
  catch (e) { alert("Konnte nicht kopieren.") }
})

window.addEventListener("DOMContentLoaded", () => {
  input.value = localStorage.getItem("inputText") || ""
  output.value = localStorage.getItem("outputText") || ""
})
</script>
</body>
</html>
