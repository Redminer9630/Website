<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrindCraft Game</title>
    <style>
        body{font-family: Arial, sans-serif; text-align: center; background-color: #f4f4f4; margin: 0; padding: 0;}
        #game{margin: 20px auto; max-width: 400px; background: #fff; padding: 20px; box-shadow: 0 0 10px rgba(0,0,0,0.1); border-radius: 8px;}
        button{background: #3498db; color: white; border: none; padding: 10px 20px; margin: 5px; border-radius: 5px; cursor: pointer;}
        button:disabled{background: #95a5a6; cursor: not-allowed;}
        h1, h2{color: #333;}
    </style>
</head>
<body>
    <div id="game">
        <h1>GrindCraft</h1>
        <div id="resources"></div>
        <div id="actions"></div>
        <hr>
        <h2>Crafting</h2>
        <div id="crafting"></div>
    </div>
    <script>
        const Game = {
            resources: {}, // Ressourcen-Tracker
            tools: {}, // Werkzeuge
            recipes: {}, // Crafting-Rezepte
            init() {
                this.addResource("wood", "Holz", "axe");
                this.addResource("stone", "Stein", "pickaxe");
                this.addResource("dirt", "Erde", "shovel");
                this.addTool("axe", "Axt", { wood: 2, stone: 1, dirt: 0.5 });
                this.addTool("pickaxe", "Pickaxe", { wood: 1, stone: 2, dirt: 0.5 });
                this.addTool("shovel", "Schaufel", { wood: 1, stone: 1, dirt: 2 });
                this.addRecipe("pickaxe", "Spitzhacke", { wood: 10, stone: 5 });
                this.renderResources();
                this.renderActions();
                this.renderCrafting();
            },
            addResource(id, name, toolType) {
                this.resources[id] = { name, toolType, amount: 0 };
            },
            addTool(id, name, multipliers) {
                this.tools[id] = { name, multipliers };
            },
            addRecipe(id, name, cost) {
                this.recipes[id] = { name, cost, crafted: 0 };
            },
            gatherResource(id) {
                const resource = this.resources[id];
                const tool = this.tools[resource.toolType];
                const multiplier = tool.multipliers[id] || 1;
                const amount = Math.ceil(multiplier);
                resource.amount += amount;
                this.updateResources();
                this.updateCrafting();
            },
            craftItem(id) {
                const recipe = this.recipes[id];
                const canCraft = Object.entries(recipe.cost).every(
                    ([resId, amount]) => this.resources[resId].amount >= amount
                );
                if (canCraft) {
                    Object.entries(recipe.cost).forEach(([resId, amount]) => {
                        this.resources[resId].amount -= amount;
                    });
                    recipe.crafted++;
                    this.updateResources();
                    this.updateCrafting();
                }
            },
            renderResources() {
                const resourcesDiv = document.getElementById("resources");
                resourcesDiv.innerHTML = "";
                Object.entries(this.resources).forEach(([id, resource]) => {
                    const p = document.createElement("p");
                    p.id = `resource-${id}`;
                    p.textContent = `${resource.name}: ${resource.amount}`;
                    resourcesDiv.appendChild(p);
                });
            },
            renderActions() {
                const actionsDiv = document.getElementById("actions");
                actionsDiv.innerHTML = "";
                Object.entries(this.resources).forEach(([id, resource]) => {
                    const btn = document.createElement("button");
                    btn.textContent = `${resource.name} sammeln`;
                    btn.addEventListener("click", () => this.gatherResource(id));
                    actionsDiv.appendChild(btn);
                });
            },
            renderCrafting() {
                const craftingDiv = document.getElementById("crafting");
                craftingDiv.innerHTML = "";
                Object.entries(this.recipes).forEach(([id, recipe]) => {
                    const btn = document.createElement("button");
                    btn.id = `craft-${id}`;
                    btn.textContent = `Baue ${recipe.name} (${this.formatCost(
                        recipe.cost
                    )})`;
                    btn.addEventListener("click", () => this.craftItem(id));
                    craftingDiv.appendChild(btn);
                    const p = document.createElement("p");
                    p.id = `crafted-${id}`;
                  p.textContent = `${recipe.name}: ${recipe.crafted}`;
                    craftingDiv.appendChild(p);
                });
            },
            updateResources() {
                Object.entries(this.resources).forEach(([id, resource]) => {
                    const resourceElement = document.getElementById(
                        `resource-${id}`
                    );
                    resourceElement.textContent = `${resource.name}: ${resource.amount}`;
                });
            },
            updateCrafting() {
                Object.entries(this.recipes).forEach(([id, recipe]) => {
                    const craftButton = document.getElementById(`craft-${id}`);
                    const canCraft = Object.entries(recipe.cost).every(
                        ([resId, amount]) => this.resources[resId].amount >= amount
                    );
                    craftButton.disabled = !canCraft;
                    const craftedElement = document.getElementById(`crafted-${id}`);
                    craftedElement.textContent = `${recipe.name}: ${recipe.crafted}`;
                });
            },
            formatCost(cost) {
                return Object.entries(cost)
                    .map(([resId, amount]) => `${amount} ${this.resources[resId].name}`)
                    .join(", ");
            },
        };
        Game.init();
    </script>
</body>
</html>
