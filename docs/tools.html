<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tools - Redminer9630</title>
    <style>
        @font-face {
            font-family: 'MinecraftFont';
            src: url('https://redminer9630github.github.io/Redminer9630.de/minecraft_font.ttf') format('truetype');
        }

        :root {
            --bg-color-dark: #282c34;
            --text-color-dark: white;
            --bg-color-light: #f0f0f0;
            --text-color-light: #000;
            --button-bg: #4CAF50;
            --button-hover-bg: #45a049;
            --line-color: #ccc;
        }

        body {
            font-family: 'MinecraftFont', sans-serif;
            background-color: var(--bg-color-dark);
            color: var(--text-color-dark);
            text-align: center;
            padding: 20px;
            transition: background-color 0.3s, color 0.3s;
        }

        h1 {
            font-size: 30px;
            margin-bottom: 20px;
            text-align: center;
        }

        .button {
            background-color: var(--button-bg);
            color: white;
            padding: 15px;
            margin: 10px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
        }

        .button:hover {
            background-color: var(--button-hover-bg);
        }

        .container {
            display: flex;
            justify-content: center;
            margin: 20px;
        }

        .calculator, .stopwatch, .timer {
            width: 45%;
            margin: 10px;
        }

        .calculator {
            text-align: left;
        }

        .calculator input, .calculator button {
            display: block;
            margin-bottom: 10px;
            font-size: 18px;
            padding: 10px;
        }

        .result {
            height: 50px;
            font-size: 20px;
        }

        .line {
            border-left: 2px solid var(--line-color);
            height: 300px;
            margin: 0 20px;
            display: inline-block;
        }

        .stopwatch-display, .timer-display {
            font-size: 20px;
            margin-bottom: 10px;
        }

        .stopwatch, .timer {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>Tools - Redminer9630</h1>
    <div class="theme-toggle" onclick="toggleTheme()"></div>

    <div class="container">
        <div class="calculator">
            <h2>Taschenrechner</h2>
            <input type="text" id="calc-display" class="result" readonly>
            <button class="button" onclick="clearCalc()">AC</button>
            <button class="button" onclick="calcInput(7)">7</button>
            <button class="button" onclick="calcInput(8)">8</button>
            <button class="button" onclick="calcInput(9)">9</button>
            <button class="button" onclick="calcOperation('/')">/</button>
            <button class="button" onclick="calcInput(4)">4</button>
            <button class="button" onclick="calcInput(5)">5</button>
            <button class="button" onclick="calcInput(6)">6</button>
            <button class="button" onclick="calcOperation('*')">*</button>
            <button class="button" onclick="calcInput(1)">1</button>
            <button class="button" onclick="calcInput(2)">2</button>
            <button class="button" onclick="calcInput(3)">3</button>
            <button class="button" onclick="calcOperation('-')">-</button>
            <button class="button" onclick="calcInput(0)">0</button>
            <button class="button" onclick="calcInput('.')">.</button>
            <button class="button" onclick="calculate()">=</button>
            <button class="button" onclick="calcOperation('+')">+</button>
        </div>

        <div class="line"></div>

        <div class="stopwatch">
            <h2>Stoppuhr</h2>
            <div id="stopwatch-display" class="stopwatch-display">00:00:000</div>
            <button class="button" onclick="startStopwatch()">Start</button>
            <button class="button" onclick="stopStopwatch()">Stopp</button>
            <button class="button" onclick="resetStopwatch()">Zur√ºcksetzen</button>
        </div>

        <div class="line"></div>

        <div class="timer">
            <h2>Timer</h2>
            <input type="number" id="timer-minutes" placeholder="Minuten" min="0">
            <input type="number" id="timer-seconds" placeholder="Sekunden" min="0" max="59">
            <button class="button" onclick="startTimer()">Start</button>
            <button class="button" onclick="stopTimer()">Stopp</button>
            <div id="timer-display" class="timer-display">00:00</div>
        </div>
    </div>

    <script>
        let currentTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        applyTheme(currentTheme);

        function toggleTheme() {
            currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
            localStorage.setItem('theme', currentTheme);
            applyTheme(currentTheme);
        }

        function applyTheme(theme) {
            if (theme === 'light') {
                document.body.style.backgroundColor = 'var(--bg-color-light)';
                document.body.style.color = 'var(--text-color-light)';
            } else {
                document.body.style.backgroundColor = 'var(--bg-color-dark)';
                document.body.style.color = 'var(--text-color-dark)';
            }
        }

        // Calculator
        let calcDisplay = document.getElementById('calc-display');
        let currentCalc = '';

        function calcInput(value) {
            currentCalc += value;
            calcDisplay.value = currentCalc;
        }

        function calcOperation(op) {
            currentCalc += ' ' + op + ' ';
            calcDisplay.value = currentCalc;
        }

        function calculate() {
            try {
                const result = eval(currentCalc);
                currentCalc = result.toString();
                calcDisplay.value = currentCalc;
            } catch (error) {
                calcDisplay.value = 'Error';
            }
        }

        function clearCalc() {
            currentCalc = '';
            calcDisplay.value = '';
        }

        // Stopwatch
        let stopwatchTime = parseInt(localStorage.getItem('stopwatchTime')) || 0;
        let isStopwatchRunning = false;
        let stopwatchInterval;

        function startStopwatch() {
            if (isStopwatchRunning) return;
            isStopwatchRunning = true;
            stopwatchInterval = setInterval(() => {
                stopwatchTime += 10;
                localStorage.setItem('stopwatchTime', stopwatchTime);
                displayStopwatch();
            }, 10);
        }

        function stopStopwatch() {
            isStopwatchRunning = false;
            clearInterval(stopwatchInterval);
        }

        function resetStopwatch() {
            stopStopwatch();
            stopwatchTime = 0;
            localStorage.setItem('stopwatchTime', stopwatchTime);
            displayStopwatch();
        }

        function displayStopwatch() {
            let minutes = Math.floor((stopwatchTime / 1000) / 60);
            let seconds = Math.floor((stopwatchTime / 1000) % 60);
            let milliseconds = stopwatchTime % 1000;
            document.getElementById('stopwatch-display').textContent =
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}:${milliseconds.toString().padStart(3, '0')}`;
        }

        displayStopwatch(); // Initial display

        // Timer
        let timerInterval;
        let timerEndTime = parseInt(localStorage.getItem('timerEndTime')) || 0;

        function startTimer() {
            const minutes = parseInt(document.getElementById('timer-minutes').value) || 0;
            const seconds = parseInt(document.getElementById('timer-seconds').value) || 0;
            const totalTime = (minutes * 60 + seconds) * 1000;
            if (timerInterval) clearInterval(timerInterval);
            timerEndTime = Date.now() + totalTime;
            localStorage.setItem('timerEndTime', timerEndTime);
            updateTimer();
        }

        function updateTimer() {
            timerInterval = setInterval(() => {
                const remainingTime = timerEndTime - Date.now();
                if (remainingTime <= 0) {
                    clearInterval(timerInterval);
                    document.getElementById('timer-display').textContent = '00:00';
                } else {
                    document.getElementById('timer-display').textContent = formatTime(remainingTime);
                }
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
        }

        function formatTime(milliseconds) {
            let totalSeconds = Math.floor(milliseconds / 1000);
            let minutes = Math.floor(totalSeconds / 60);
            let seconds = totalSeconds % 60;
            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
    </script>
</body>
</html>
