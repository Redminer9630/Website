<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #2c3e50;
            color: white;
            padding: 10px;
            text-align: center;
        }

        main {
            padding: 20px;
        }

        select, button {
            margin: 10px;
            padding: 10px;
            font-size: 16px;
        }

        footer {
            background-color: #2c3e50;
            color: white;
            text-align: center;
            padding: 10px;
            position: absolute;
            bottom: 0;
            width: 100%;
        }

        #recipeForm {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #itemSelect {
            width: 200px;
        }
    </style>
</head>
<body>
    <header>
        <h1>Recipe Generator</h1>
    </header>

    <main>
        <form id="recipeForm">
            <label for="versionSelect">Wähle eine Version:</label>
            <select id="versionSelect">
                <option value="1.16">1.16</option>
                <option value="1.17">1.17</option>
                <option value="1.18">1.18</option>
                <option value="1.19">1.19</option>
                <option value="1.20">1.20</option>
            </select>

            <label for="itemSelect">Wähle ein Item:</label>
            <select id="itemSelect">
                <option value="">Bitte wählen...</option>
            </select>

            <button type="button" onclick="generateRecipe()">Rezept generieren</button>
        </form>

        <div id="recipeOutput"></div>
    </main>

    <footer>
        <p>© 2024 Minecraft Recipe Generator</p>
    </footer>

    <script>
        // Funktion zum Laden der Items basierend auf der Version
        function loadItems(version) {
            const itemSelect = document.getElementById('itemSelect');
            const apiUrl = `https://minecraft.fandom.com/api.php?action=query&format=json&prop=extracts&titles=Items_${version}`;

            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    const pages = data.query.pages;
                    let items = [];

                    for (let pageId in pages) {
                        let page = pages[pageId];
                        if (page.extract) {
                            // Hier verarbeiten wir den extrahierten HTML-Inhalt
                            items = parseItemsFromHtml(page.extract);
                        }
                    }

                    // Optionen in das Dropdown-Menü einfügen
                    itemSelect.innerHTML = '';
                    items.forEach(item => {
                        let option = document.createElement('option');
                        option.value = item.id;
                        option.textContent = item.name;
                        itemSelect.appendChild(option);
                    });
                })
                .catch(error => {
                    console.error('Fehler beim Laden der Items:', error);
                });
        }

        // Funktion zum Parsen von HTML-Inhalten
        function parseItemsFromHtml(html) {
            const items = [];
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = html;

            // Beispiel: Suche nach einem bestimmten Muster oder Elementen im HTML
            const itemElements = tempDiv.querySelectorAll('ul li'); // Beispiel für die Suche nach Listenelementen
            itemElements.forEach(li => {
                const itemText = li.textContent.trim();
                if (itemText) {
                    items.push({
                        id: itemText.toLowerCase().replace(/\s+/g, '_'), // ID-basierte Konvention (kann angepasst werden)
                        name: itemText
                    });
                }
            });

            return items;
        }

        // Event-Listener für die Versionauswahl
        document.getElementById('versionSelect').addEventListener('change', function() {
            let selectedVersion = this.value;
            loadItems(selectedVersion);
        });

        // Initiales Laden der Items für die erste Version
        loadItems(document.getElementById('versionSelect').value);

        // Funktion zum Generieren eines Rezepts (beispielhaft)
        function generateRecipe() {
            const item = document.getElementById('itemSelect').value;
            const recipeOutput = document.getElementById('recipeOutput');

            if (item) {
                recipeOutput.textContent = `Rezept für ${item} wird angezeigt. (Hier können Sie den Rezeptinhalt einfügen)`;
            } else {
                recipeOutput.textContent = 'Bitte wählen Sie ein Item aus.';
            }
        }
    </script>
</body>
</html>
